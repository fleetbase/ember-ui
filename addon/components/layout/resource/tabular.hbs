<Layout::Section::Header
    @title={{@title}}
    @searchQuery={{@searchQuery}}
    @onSearch={{@onSearch}}
    @actionsWrapperClass="space-x-1"
    @actionsRenderDestination={{@actionsRenderDestination}}
    class={{@headerClass}}
>
    {{#if @onSubmitBulkSearch}}
        <BulkSearchDropdown @value={{@bulkSearchValue}} @onClear={{@onClearBulkSearch}} @onSubmit={{@onSubmitBulkSearch}} @placeholder={{@bulkSearchPlaceholder}} />
    {{/if}}
    {{#if @onReload}}
        <Button @icon="refresh" @onClick={{@onReload}} @helpText="Refresh" class={{@refreshButtonClass}} />
    {{/if}}
    <FiltersPicker
        @columns={{this.columns}}
        @onApply={{fn this.filters.apply @controller}}
        @onClear={{fn this.filters.reset @controller}}
        @onFilterClear={{this.filters.clear}}
        @onChange={{this.filters.set}}
        @buttonWrapperClass={{@filterPickerButtonClass}}
        @gridCols={{@filterPickerGridCols}}
        @width={{@filterPickerWidth}}
        @iconOnly={{true}}
    />
    <VisibleColumnPicker @columns={{this.columns}} @onChange={{fn (mut this.columns)}} @iconOnly={{true}} class={{@columnPickerButtonClass}} />
    {{#if (safe-has this.table "selectedRows")}}
        <DropdownButton
            @icon="layer-group"
            @text="Bulk Actions"
            @type="magic"
            @size="sm"
            @buttonWrapperClass={{@bulkActionButtonClass}}
            @contentClass="dropdown-menu"
            @permission="fleet-ops delete allocation"
            as |dd|
        >
            <div class="next-dd-menu mt-2 mx-0">
                {{#each @bulkActions as |bulkAction|}}
                    {{#if bulkAction.separator}}
                        <div class="next-dd-menu-seperator"></div>
                    {{else}}
                        <div class="px-1">
                            <a href="#" class="next-dd-item {{bulkAction.class}}" {{on "click" (dropdown-fn dd bulkAction.fn)}}>
                                {{#if bulkAction.icon}}
                                    <div class="w-{{or bulkAction.iconWidth '6'}}"><FaIcon @icon={{bulkAction.icon}} @size={{or bulkAction.iconSize "sm"}} /></div>
                                {{/if}}
                                <div>{{bulkAction.label}}</div>
                            </a>
                        </div>
                    {{/if}}
                {{/each}}
            </div>
        </DropdownButton>
    {{/if}}
    {{#each @actionButtons as |actionButton|}}
        <Button
            @type={{actionButton.type}}
            @text={{actionButton.text}}
            @onClick={{if actionButton.perform (perform actionButton.perform) (or actionButton.onClick actionButton.fn)}}
            @size={{actionButton.size}}
            @buttonType={{actionButton.buttonType}}
            @disabled={{actionButton.disabled}}
            @exampleText={{actionButton.exampleText}}
            @helpText={{actionButton.helpText}}
            @icon={{actionButton.icon}}
            @iconClass={{actionButton.iconClass}}
            @iconFlip={{actionButton.iconFlip}}
            @iconPrefix={{actionButton.iconPrefix}}
            @iconRotation={{actionButton.iconRotation}}
            @iconSize={{actionButton.iconSize}}
            @isLoading={{actionButton.isLoading}}
            @outline={{actionButton.outline}}
            @permission={{actionButton.permission}}
            @wrapperClass={{actionButton.wrapperClass}}
            @textClass={{actionButton.textClass}}
            @tooltipPlacement={{actionButton.tooltipPlacement}}
            @visible={{actionButton.visible}}
            class={{actionButton.class}}
        />
    {{/each}}
    {{#if @onPressNew}}
        <Button @icon="plus" @iconPrefix="fas" @type="primary" @text="New" class={{@newButtonClass}} @onClick={{@onPressNew}} />
    {{/if}}
    {{#if @onPressImport}}
        <Button @icon="upload" @type="magic" @text="Import" @wrapperClass="hidden md:flex" class={{@importButtonClass}} @onClick={{@onPressImport}} />
    {{/if}}
    {{#if @onPressExport}}
        <Button @icon="long-arrow-up" @iconClass="rotate-icon-45" @wrapperClass="hidden md:flex" @text="Export" class={{@exportButtonClass}} @onClick={{@onPressExport}} />
    {{/if}}
</Layout::Section::Header>

<Layout::Section::Body>
    {{#if (has-block)}}
        {{yield @data}}
    {{else}}
        <Table
            @rows={{@data}}
            @columns={{this.columns}}
            @selectable={{or @selectable true}}
            @canSelectAll={{or @canSelectAll true}}
            @onSetup={{this.setupTable}}
            @pagination={{or @pagination true}}
            @paginationMeta={{@data.meta}}
            @page={{@page}}
            @onPageChange={{@onPageChange}}
            @tfootVerticalOffset={{@tfootVerticalOffset}}
            @tfootVerticalOffsetElements={{@tfootVerticalOffsetElements}}
        />
    {{/if}}
</Layout::Section::Body>